; Listing generated by Microsoft (R) Optimizing Compiler Version 19.00.23506.0 

	TITLE	C:\Users\Michel\Desktop\Source\GameServer\Source\wsJoinServerCli.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	?__empty_global_delete@@YAXPAX@Z		; __empty_global_delete
PUBLIC	?__empty_global_delete@@YAXPAXI@Z		; __empty_global_delete
PUBLIC	?SetProtocolCore@wsJoinServerCli@@QAEHP6AXEPAEH@Z@Z ; wsJoinServerCli::SetProtocolCore
PUBLIC	?FDWRITE_MsgDataSend@wsJoinServerCli@@QAEHXZ	; wsJoinServerCli::FDWRITE_MsgDataSend
PUBLIC	?DataRecv@wsJoinServerCli@@QAEHXZ		; wsJoinServerCli::DataRecv
PUBLIC	?DataSend@wsJoinServerCli@@QAEHPADH@Z		; wsJoinServerCli::DataSend
PUBLIC	?Connect@wsJoinServerCli@@QAEHPADGK@Z		; wsJoinServerCli::Connect
PUBLIC	??0wsJoinServerCli@@QAE@XZ			; wsJoinServerCli::wsJoinServerCli
PUBLIC	??1wsJoinServerCli@@UAE@XZ			; wsJoinServerCli::~wsJoinServerCli
PUBLIC	??_GwsJoinServerCli@@UAEPAXI@Z			; wsJoinServerCli::`scalar deleting destructor'
PUBLIC	??_7wsJoinServerCli@@6B@			; wsJoinServerCli::`vftable'
PUBLIC	??_C@_0BE@MELEPACJ@wsJoinServerCli?4cpp?$AA@	; `string'
PUBLIC	??_C@_0BF@CPKGJHBM@?5Connect?5Error?5?$CFs?5?$CFd?$AA@ ; `string'
PUBLIC	??_C@_0BL@INMHEGJC@server?5name?5not?5found?5?$FL?$CFs?$FN?$AA@ ; `string'
PUBLIC	??_C@_0BP@DJPBKKNL@Client?5WSAAsyncSelect?5error?5?$CFd?$AA@ ; `string'
PUBLIC	??_C@_0BG@DJOPGDCB@error?9L3?5?3?5?$CFd?5?$CI?$CFs?5?$CFd?$CJ?$AA@ ; `string'
PUBLIC	??_C@_0CG@DMMIJENA@error?9L3?5?3?5buffer?5error?5closed?5?$CF@ ; `string'
PUBLIC	??_C@_0CK@NAOKACP@error?9L3?5?3?5Copy1?5?3?5nLeft?3?$CFd?5len?3@ ; `string'
PUBLIC	??_C@_0CC@HECGJOBH@error?9L3?5?3?5send?$CI?$CJ?5?5result?5is?5zer@ ; `string'
PUBLIC	??_C@_0BL@HNPHKEOO@FD_WRITE?5send?$CI?$CJ?5?$LP?$KB?$LH?$KP?5?$CFd?5?$CFd?$AA@ ; `string'
PUBLIC	??_C@_0CE@HIKCACFP@FD_WRITE?5send?$CI?$CJ?5WSAEWOULDBLOCK?5?3@ ; `string'
PUBLIC	??_C@_0BJ@BMEBGMFO@send?$CI?$CJ?5result?5is?5zero?5?$CFd?$AA@ ; `string'
PUBLIC	??_C@_0CC@CMOPGBFG@error?9L3?5?3?5nDx?5?$CFd?5m_SendBufLen?5?$CF@ ; `string'
PUBLIC	??_C@_0CE@LOFMLGPB@error?9L3?5?3?5closed?5?$CFd?5?9?5buff?3?$CFd?$CI?$CF@ ; `string'
PUBLIC	??_C@_0BJ@MHCMJICL@error?9L3?5?3?5recv?5error?5?$CFd?$AA@ ; `string'
PUBLIC	??_C@_0DA@NDEDNMBA@error?9L2?5?3?5header?5error?5?$CI?$CFs?5?$CFd?$CJl@ ; `string'
PUBLIC	??_C@_0BD@JDAMFKGN@error?9L2?5?3?5size?5?$CFd?$AA@ ; `string'
PUBLIC	??_R4wsJoinServerCli@@6B@			; wsJoinServerCli::`RTTI Complete Object Locator'
PUBLIC	??_R0?AVwsJoinServerCli@@@8			; wsJoinServerCli `RTTI Type Descriptor'
PUBLIC	??_R3wsJoinServerCli@@8				; wsJoinServerCli::`RTTI Class Hierarchy Descriptor'
PUBLIC	??_R2wsJoinServerCli@@8				; wsJoinServerCli::`RTTI Base Class Array'
PUBLIC	??_R1A@?0A@EA@wsJoinServerCli@@8		; wsJoinServerCli::`RTTI Base Class Descriptor at (0,-1,0,64)'
PUBLIC	??_R13?0A@EA@MyWinsockBase@@8			; MyWinsockBase::`RTTI Base Class Descriptor at (4,-1,0,64)'
PUBLIC	??_R0?AVMyWinsockBase@@@8			; MyWinsockBase `RTTI Type Descriptor'
PUBLIC	??_R3MyWinsockBase@@8				; MyWinsockBase::`RTTI Class Hierarchy Descriptor'
PUBLIC	??_R2MyWinsockBase@@8				; MyWinsockBase::`RTTI Base Class Array'
PUBLIC	??_R1A@?0A@EA@MyWinsockBase@@8			; MyWinsockBase::`RTTI Base Class Descriptor at (0,-1,0,64)'
EXTRN	??3@YAXPAXI@Z:PROC				; operator delete
EXTRN	__imp__closesocket@4:PROC
EXTRN	__imp__connect@12:PROC
EXTRN	__imp__htons@4:PROC
EXTRN	__imp__inet_addr@4:PROC
EXTRN	__imp__recv@16:PROC
EXTRN	__imp__send@16:PROC
EXTRN	__imp__gethostbyname@4:PROC
EXTRN	__imp__WSAGetLastError@0:PROC
EXTRN	__imp__WSAAsyncSelect@16:PROC
EXTRN	?Close@MyWinsockBase@@QAEHI@Z:PROC		; MyWinsockBase::Close
EXTRN	?Close@MyWinsockBase@@QAEHXZ:PROC		; MyWinsockBase::Close
EXTRN	?SetConnect@MyWinsockBase@@QAEXH@Z:PROC		; MyWinsockBase::SetConnect
EXTRN	??0MyWinsockBase@@QAE@XZ:PROC			; MyWinsockBase::MyWinsockBase
EXTRN	??1MyWinsockBase@@QAE@XZ:PROC			; MyWinsockBase::~MyWinsockBase
EXTRN	??_EwsJoinServerCli@@UAEPAXI@Z:PROC		; wsJoinServerCli::`vector deleting destructor'
EXTRN	@__security_check_cookie@4:PROC
EXTRN	_memcpy:PROC
EXTRN	??_7type_info@@6B@:QWORD			; type_info::`vftable'
EXTRN	?LogAdd@@3P6AXPADZZA:DWORD			; LogAdd
EXTRN	?LogAddC@@3P6AXEPADZZA:DWORD			; LogAddC
EXTRN	___security_cookie:DWORD
;	COMDAT ??_R1A@?0A@EA@MyWinsockBase@@8
rdata$r	SEGMENT
??_R1A@?0A@EA@MyWinsockBase@@8 DD FLAT:??_R0?AVMyWinsockBase@@@8 ; MyWinsockBase::`RTTI Base Class Descriptor at (0,-1,0,64)'
	DD	00H
	DD	00H
	DD	0ffffffffH
	DD	00H
	DD	040H
	DD	FLAT:??_R3MyWinsockBase@@8
rdata$r	ENDS
;	COMDAT ??_R2MyWinsockBase@@8
rdata$r	SEGMENT
??_R2MyWinsockBase@@8 DD FLAT:??_R1A@?0A@EA@MyWinsockBase@@8 ; MyWinsockBase::`RTTI Base Class Array'
rdata$r	ENDS
;	COMDAT ??_R3MyWinsockBase@@8
rdata$r	SEGMENT
??_R3MyWinsockBase@@8 DD 00H				; MyWinsockBase::`RTTI Class Hierarchy Descriptor'
	DD	00H
	DD	01H
	DD	FLAT:??_R2MyWinsockBase@@8
rdata$r	ENDS
;	COMDAT ??_R0?AVMyWinsockBase@@@8
data$r	SEGMENT
??_R0?AVMyWinsockBase@@@8 DD FLAT:??_7type_info@@6B@	; MyWinsockBase `RTTI Type Descriptor'
	DD	00H
	DB	'.?AVMyWinsockBase@@', 00H
data$r	ENDS
;	COMDAT ??_R13?0A@EA@MyWinsockBase@@8
rdata$r	SEGMENT
??_R13?0A@EA@MyWinsockBase@@8 DD FLAT:??_R0?AVMyWinsockBase@@@8 ; MyWinsockBase::`RTTI Base Class Descriptor at (4,-1,0,64)'
	DD	00H
	DD	04H
	DD	0ffffffffH
	DD	00H
	DD	040H
	DD	FLAT:??_R3MyWinsockBase@@8
rdata$r	ENDS
;	COMDAT ??_R1A@?0A@EA@wsJoinServerCli@@8
rdata$r	SEGMENT
??_R1A@?0A@EA@wsJoinServerCli@@8 DD FLAT:??_R0?AVwsJoinServerCli@@@8 ; wsJoinServerCli::`RTTI Base Class Descriptor at (0,-1,0,64)'
	DD	01H
	DD	00H
	DD	0ffffffffH
	DD	00H
	DD	040H
	DD	FLAT:??_R3wsJoinServerCli@@8
rdata$r	ENDS
;	COMDAT ??_R2wsJoinServerCli@@8
rdata$r	SEGMENT
??_R2wsJoinServerCli@@8 DD FLAT:??_R1A@?0A@EA@wsJoinServerCli@@8 ; wsJoinServerCli::`RTTI Base Class Array'
	DD	FLAT:??_R13?0A@EA@MyWinsockBase@@8
rdata$r	ENDS
;	COMDAT ??_R3wsJoinServerCli@@8
rdata$r	SEGMENT
??_R3wsJoinServerCli@@8 DD 00H				; wsJoinServerCli::`RTTI Class Hierarchy Descriptor'
	DD	00H
	DD	02H
	DD	FLAT:??_R2wsJoinServerCli@@8
rdata$r	ENDS
;	COMDAT ??_R0?AVwsJoinServerCli@@@8
data$r	SEGMENT
??_R0?AVwsJoinServerCli@@@8 DD FLAT:??_7type_info@@6B@	; wsJoinServerCli `RTTI Type Descriptor'
	DD	00H
	DB	'.?AVwsJoinServerCli@@', 00H
data$r	ENDS
;	COMDAT ??_R4wsJoinServerCli@@6B@
rdata$r	SEGMENT
??_R4wsJoinServerCli@@6B@ DD 00H			; wsJoinServerCli::`RTTI Complete Object Locator'
	DD	00H
	DD	00H
	DD	FLAT:??_R0?AVwsJoinServerCli@@@8
	DD	FLAT:??_R3wsJoinServerCli@@8
rdata$r	ENDS
;	COMDAT ??_C@_0BD@JDAMFKGN@error?9L2?5?3?5size?5?$CFd?$AA@
CONST	SEGMENT
??_C@_0BD@JDAMFKGN@error?9L2?5?3?5size?5?$CFd?$AA@ DB 'error-L2 : size %d'
	DB	00H						; `string'
CONST	ENDS
;	COMDAT ??_C@_0DA@NDEDNMBA@error?9L2?5?3?5header?5error?5?$CI?$CFs?5?$CFd?$CJl@
CONST	SEGMENT
??_C@_0DA@NDEDNMBA@error?9L2?5?3?5header?5error?5?$CI?$CFs?5?$CFd?$CJl@ DB 'e'
	DB	'rror-L2 : header error (%s %d)lOfs:%d, size:%d', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BJ@MHCMJICL@error?9L3?5?3?5recv?5error?5?$CFd?$AA@
CONST	SEGMENT
??_C@_0BJ@MHCMJICL@error?9L3?5?3?5recv?5error?5?$CFd?$AA@ DB 'error-L3 : '
	DB	'recv error %d', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0CE@LOFMLGPB@error?9L3?5?3?5closed?5?$CFd?5?9?5buff?3?$CFd?$CI?$CF@
CONST	SEGMENT
??_C@_0CE@LOFMLGPB@error?9L3?5?3?5closed?5?$CFd?5?9?5buff?3?$CFd?$CI?$CF@ DB 'e'
	DB	'rror-L3 : closed %d - buff:%d(%d) ', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0CC@CMOPGBFG@error?9L3?5?3?5nDx?5?$CFd?5m_SendBufLen?5?$CF@
CONST	SEGMENT
??_C@_0CC@CMOPGBFG@error?9L3?5?3?5nDx?5?$CFd?5m_SendBufLen?5?$CF@ DB 'err'
	DB	'or-L3 : nDx %d m_SendBufLen %d', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0BJ@BMEBGMFO@send?$CI?$CJ?5result?5is?5zero?5?$CFd?$AA@
CONST	SEGMENT
??_C@_0BJ@BMEBGMFO@send?$CI?$CJ?5result?5is?5zero?5?$CFd?$AA@ DB 'send() '
	DB	'result is zero %d', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0CE@HIKCACFP@FD_WRITE?5send?$CI?$CJ?5WSAEWOULDBLOCK?5?3@
CONST	SEGMENT
??_C@_0CE@HIKCACFP@FD_WRITE?5send?$CI?$CJ?5WSAEWOULDBLOCK?5?3@ DB 'FD_WRI'
	DB	'TE send() WSAEWOULDBLOCK : %d', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0BL@HNPHKEOO@FD_WRITE?5send?$CI?$CJ?5?$LP?$KB?$LH?$KP?5?$CFd?5?$CFd?$AA@
CONST	SEGMENT
??_C@_0BL@HNPHKEOO@FD_WRITE?5send?$CI?$CJ?5?$LP?$KB?$LH?$KP?5?$CFd?5?$CFd?$AA@ DB 'F'
	DB	'D_WRITE send() ', 0bfH, 0a1H, 0b7H, 0afH, ' %d %d', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0CC@HECGJOBH@error?9L3?5?3?5send?$CI?$CJ?5?5result?5is?5zer@
CONST	SEGMENT
??_C@_0CC@HECGJOBH@error?9L3?5?3?5send?$CI?$CJ?5?5result?5is?5zer@ DB 'er'
	DB	'ror-L3 : send()  result is zero', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0CK@NAOKACP@error?9L3?5?3?5Copy1?5?3?5nLeft?3?$CFd?5len?3@
CONST	SEGMENT
??_C@_0CK@NAOKACP@error?9L3?5?3?5Copy1?5?3?5nLeft?3?$CFd?5len?3@ DB 'erro'
	DB	'r-L3 : Copy1 : nLeft:%d len:%d nDx:%d', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0CG@DMMIJENA@error?9L3?5?3?5buffer?5error?5closed?5?$CF@
CONST	SEGMENT
??_C@_0CG@DMMIJENA@error?9L3?5?3?5buffer?5error?5closed?5?$CF@ DB 'error-'
	DB	'L3 : buffer error closed %d, %d', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0BG@DJOPGDCB@error?9L3?5?3?5?$CFd?5?$CI?$CFs?5?$CFd?$CJ?$AA@
CONST	SEGMENT
??_C@_0BG@DJOPGDCB@error?9L3?5?3?5?$CFd?5?$CI?$CFs?5?$CFd?$CJ?$AA@ DB 'er'
	DB	'ror-L3 : %d (%s %d)', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0BP@DJPBKKNL@Client?5WSAAsyncSelect?5error?5?$CFd?$AA@
CONST	SEGMENT
??_C@_0BP@DJPBKKNL@Client?5WSAAsyncSelect?5error?5?$CFd?$AA@ DB 'Client W'
	DB	'SAAsyncSelect error %d', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0BL@INMHEGJC@server?5name?5not?5found?5?$FL?$CFs?$FN?$AA@
CONST	SEGMENT
??_C@_0BL@INMHEGJC@server?5name?5not?5found?5?$FL?$CFs?$FN?$AA@ DB 'serve'
	DB	'r name not found [%s]', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0BF@CPKGJHBM@?5Connect?5Error?5?$CFs?5?$CFd?$AA@
CONST	SEGMENT
??_C@_0BF@CPKGJHBM@?5Connect?5Error?5?$CFs?5?$CFd?$AA@ DB ' Connect Error'
	DB	' %s %d', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0BE@MELEPACJ@wsJoinServerCli?4cpp?$AA@
CONST	SEGMENT
??_C@_0BE@MELEPACJ@wsJoinServerCli?4cpp?$AA@ DB 'wsJoinServerCli.cpp', 00H ; `string'
CONST	ENDS
;	COMDAT ??_7wsJoinServerCli@@6B@
CONST	SEGMENT
??_7wsJoinServerCli@@6B@ DD FLAT:??_R4wsJoinServerCli@@6B@ ; wsJoinServerCli::`vftable'
	DD	FLAT:??_EwsJoinServerCli@@UAEPAXI@Z
CONST	ENDS
; Function compile flags: /Ogtp
;	COMDAT ??_GwsJoinServerCli@@UAEPAXI@Z
_TEXT	SEGMENT
___flags$ = 8						; size = 4
??_GwsJoinServerCli@@UAEPAXI@Z PROC			; wsJoinServerCli::`scalar deleting destructor', COMDAT
; _this$ = ecx
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi
  00004	8b f1		 mov	 esi, ecx
  00006	e8 00 00 00 00	 call	 ??1wsJoinServerCli@@UAE@XZ ; wsJoinServerCli::~wsJoinServerCli
  0000b	f6 45 08 01	 test	 BYTE PTR ___flags$[ebp], 1
  0000f	74 0e		 je	 SHORT $LN4@scalar
  00011	68 28 00 19 00	 push	 1638440			; 00190028H
  00016	56		 push	 esi
  00017	e8 00 00 00 00	 call	 ??3@YAXPAXI@Z		; operator delete
  0001c	83 c4 08	 add	 esp, 8
$LN4@scalar:
  0001f	8b c6		 mov	 eax, esi
  00021	5e		 pop	 esi
  00022	5d		 pop	 ebp
  00023	c2 04 00	 ret	 4
??_GwsJoinServerCli@@UAEPAXI@Z ENDP			; wsJoinServerCli::`scalar deleting destructor'
_TEXT	ENDS
; Function compile flags: /Ogtp
; File c:\users\michel\desktop\source\gameserver\source\wsjoinservercli.cpp
;	COMDAT ??1wsJoinServerCli@@UAE@XZ
_TEXT	SEGMENT
??1wsJoinServerCli@@UAE@XZ PROC				; wsJoinServerCli::~wsJoinServerCli, COMDAT
; _this$ = ecx

; 11   : {

  00000	c7 01 00 00 00
	00		 mov	 DWORD PTR [ecx], OFFSET ??_7wsJoinServerCli@@6B@

; 12   : 	return;
; 13   : }

  00006	83 c1 04	 add	 ecx, 4
  00009	e9 00 00 00 00	 jmp	 ??1MyWinsockBase@@QAE@XZ ; MyWinsockBase::~MyWinsockBase
??1wsJoinServerCli@@UAE@XZ ENDP				; wsJoinServerCli::~wsJoinServerCli
_TEXT	ENDS
; Function compile flags: /Ogtp
; File c:\users\michel\desktop\source\gameserver\source\wsjoinservercli.cpp
;	COMDAT ??0wsJoinServerCli@@QAE@XZ
_TEXT	SEGMENT
_this$ = -4						; size = 4
??0wsJoinServerCli@@QAE@XZ PROC				; wsJoinServerCli::wsJoinServerCli, COMDAT
; _this$ = ecx

; 6    : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx
  00004	56		 push	 esi
  00005	8b f1		 mov	 esi, ecx
  00007	89 75 fc	 mov	 DWORD PTR _this$[ebp], esi
  0000a	8d 4e 04	 lea	 ecx, DWORD PTR [esi+4]
  0000d	e8 00 00 00 00	 call	 ??0MyWinsockBase@@QAE@XZ ; MyWinsockBase::MyWinsockBase
  00012	c7 06 00 00 00
	00		 mov	 DWORD PTR [esi], OFFSET ??_7wsJoinServerCli@@6B@

; 7    : 	return;
; 8    : }

  00018	8b c6		 mov	 eax, esi
  0001a	5e		 pop	 esi
  0001b	8b e5		 mov	 esp, ebp
  0001d	5d		 pop	 ebp
  0001e	c3		 ret	 0
??0wsJoinServerCli@@QAE@XZ ENDP				; wsJoinServerCli::wsJoinServerCli
_TEXT	ENDS
; Function compile flags: /Ogtp
; File c:\users\michel\desktop\source\gameserver\source\wsjoinservercli.cpp
;	COMDAT ?Connect@wsJoinServerCli@@QAEHPADGK@Z
_TEXT	SEGMENT
_addr$ = -20						; size = 16
__$ArrayPad$ = -4					; size = 4
_ip_addr$ = 8						; size = 4
_port$ = 12						; size = 2
_WinMsgNum$ = 16					; size = 4
?Connect@wsJoinServerCli@@QAEHPADGK@Z PROC		; wsJoinServerCli::Connect, COMDAT
; _this$ = ecx

; 23   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 14	 sub	 esp, 20			; 00000014H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00010	56		 push	 esi
  00011	8b f1		 mov	 esi, ecx
  00013	57		 push	 edi
  00014	8b 7d 08	 mov	 edi, DWORD PTR _ip_addr$[ebp]

; 24   : 	hostent* host;
; 25   : 	sockaddr_in addr;
; 26   : 	int nResult;
; 27   : 
; 28   : 	host = 0;
; 29   : 
; 30   : 	if ( this->m_hWnd  == 0 )

  00017	83 7e 08 00	 cmp	 DWORD PTR [esi+8], 0
  0001b	75 29		 jne	 SHORT $LN2@Connect

; 31   : 	{
; 32   : 		LogAdd(" Connect Error %s %d", __FILE__, __LINE__);

  0001d	6a 20		 push	 32			; 00000020H
  0001f	68 00 00 00 00	 push	 OFFSET ??_C@_0BE@MELEPACJ@wsJoinServerCli?4cpp?$AA@
  00024	68 00 00 00 00	 push	 OFFSET ??_C@_0BF@CPKGJHBM@?5Connect?5Error?5?$CFs?5?$CFd?$AA@
  00029	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  0002f	83 c4 0c	 add	 esp, 12			; 0000000cH

; 33   : 		return FALSE;

  00032	33 c0		 xor	 eax, eax
  00034	5f		 pop	 edi
  00035	5e		 pop	 esi

; 72   : 
; 73   : 	return TRUE;
; 74   : }

  00036	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00039	33 cd		 xor	 ecx, ebp
  0003b	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00040	8b e5		 mov	 esp, ebp
  00042	5d		 pop	 ebp
  00043	c2 0c 00	 ret	 12			; 0000000cH
$LN2@Connect:

; 34   : 	}
; 35   : 	addr.sin_family = AF_INET;
; 36   : 	addr.sin_port =  htons(port);

  00046	ff 75 0c	 push	 DWORD PTR _port$[ebp]
  00049	b8 02 00 00 00	 mov	 eax, 2
  0004e	66 89 45 ec	 mov	 WORD PTR _addr$[ebp], ax
  00052	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__htons@4

; 37   : 	addr.sin_addr.S_un.S_addr = inet_addr(ip_addr);

  00058	57		 push	 edi
  00059	66 89 45 ee	 mov	 WORD PTR _addr$[ebp+2], ax
  0005d	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__inet_addr@4
  00063	89 45 f0	 mov	 DWORD PTR _addr$[ebp+4], eax

; 38   : 
; 39   : 	if ( addr.sin_addr.S_un.S_addr == -1 )

  00066	83 f8 ff	 cmp	 eax, -1
  00069	75 46		 jne	 SHORT $LN3@Connect

; 40   : 	{
; 41   : 		host = gethostbyname(ip_addr);

  0006b	57		 push	 edi
  0006c	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__gethostbyname@4
  00072	8b c8		 mov	 ecx, eax

; 42   : 		if ( host == 0 )

  00074	85 c9		 test	 ecx, ecx
  00076	75 23		 jne	 SHORT $LN4@Connect

; 43   : 		{
; 44   : 			LogAdd("server name not found [%s]", ip_addr);

  00078	57		 push	 edi
  00079	68 00 00 00 00	 push	 OFFSET ??_C@_0BL@INMHEGJC@server?5name?5not?5found?5?$FL?$CFs?$FN?$AA@
  0007e	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  00084	83 c4 08	 add	 esp, 8

; 45   : 			return FALSE;

  00087	33 c0		 xor	 eax, eax
  00089	5f		 pop	 edi
  0008a	5e		 pop	 esi

; 72   : 
; 73   : 	return TRUE;
; 74   : }

  0008b	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0008e	33 cd		 xor	 ecx, ebp
  00090	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00095	8b e5		 mov	 esp, ebp
  00097	5d		 pop	 ebp
  00098	c2 0c 00	 ret	 12			; 0000000cH
$LN4@Connect:

; 46   : 		}
; 47   : 
; 48   : 		memcpy(&addr.sin_addr.S_un.S_addr, *host->h_addr_list  , host->h_length  );	

  0009b	0f bf 41 0a	 movsx	 eax, WORD PTR [ecx+10]
  0009f	50		 push	 eax
  000a0	8b 41 0c	 mov	 eax, DWORD PTR [ecx+12]
  000a3	ff 30		 push	 DWORD PTR [eax]
  000a5	8d 45 f0	 lea	 eax, DWORD PTR _addr$[ebp+4]
  000a8	50		 push	 eax
  000a9	e8 00 00 00 00	 call	 _memcpy
  000ae	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN3@Connect:

; 49   : 	}
; 50   : 
; 51   : 	nResult=connect(this->m_socket, (sockaddr*)&addr, 16);

  000b1	6a 10		 push	 16			; 00000010H
  000b3	8d 45 ec	 lea	 eax, DWORD PTR _addr$[ebp]
  000b6	50		 push	 eax
  000b7	ff 76 0c	 push	 DWORD PTR [esi+12]
  000ba	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__connect@12

; 52   : 
; 53   : 	if (nResult== -1)

  000c0	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR __imp__WSAGetLastError@0
  000c6	83 f8 ff	 cmp	 eax, -1
  000c9	75 28		 jne	 SHORT $LN6@Connect

; 54   : 	{
; 55   : 		if ( WSAGetLastError() != WSAEWOULDBLOCK)

  000cb	ff d7		 call	 edi
  000cd	3d 33 27 00 00	 cmp	 eax, 10035		; 00002733H
  000d2	74 1f		 je	 SHORT $LN6@Connect

; 56   : 		{
; 57   : 			this->Close(this->m_socket );

  000d4	ff 76 0c	 push	 DWORD PTR [esi+12]
  000d7	8d 4e 04	 lea	 ecx, DWORD PTR [esi+4]
  000da	e8 00 00 00 00	 call	 ?Close@MyWinsockBase@@QAEHI@Z ; MyWinsockBase::Close
  000df	5f		 pop	 edi

; 58   : 			return FALSE;

  000e0	33 c0		 xor	 eax, eax
  000e2	5e		 pop	 esi

; 72   : 
; 73   : 	return TRUE;
; 74   : }

  000e3	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000e6	33 cd		 xor	 ecx, ebp
  000e8	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000ed	8b e5		 mov	 esp, ebp
  000ef	5d		 pop	 ebp
  000f0	c2 0c 00	 ret	 12			; 0000000cH
$LN6@Connect:

; 59   : 		}
; 60   : 	}
; 61   : 
; 62   : 	nResult=WSAAsyncSelect(this->m_socket, this->m_hWnd , WinMsgNum, FD_READ|FD_WRITE|FD_CLOSE);

  000f3	6a 23		 push	 35			; 00000023H
  000f5	ff 75 10	 push	 DWORD PTR _WinMsgNum$[ebp]
  000f8	ff 76 08	 push	 DWORD PTR [esi+8]
  000fb	ff 76 0c	 push	 DWORD PTR [esi+12]
  000fe	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__WSAAsyncSelect@16

; 63   : 
; 64   : 	if ( nResult == -1 )

  00104	83 f8 ff	 cmp	 eax, -1
  00107	75 2e		 jne	 SHORT $LN7@Connect

; 65   : 	{
; 66   : 		closesocket(this->m_socket );

  00109	ff 76 0c	 push	 DWORD PTR [esi+12]
  0010c	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__closesocket@4

; 67   : 		LogAdd("Client WSAAsyncSelect error %d", WSAGetLastError());

  00112	ff d7		 call	 edi
  00114	50		 push	 eax
  00115	68 00 00 00 00	 push	 OFFSET ??_C@_0BP@DJPBKKNL@Client?5WSAAsyncSelect?5error?5?$CFd?$AA@
  0011a	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  00120	83 c4 08	 add	 esp, 8

; 68   : 		return FALSE;

  00123	33 c0		 xor	 eax, eax
  00125	5f		 pop	 edi
  00126	5e		 pop	 esi

; 72   : 
; 73   : 	return TRUE;
; 74   : }

  00127	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0012a	33 cd		 xor	 ecx, ebp
  0012c	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00131	8b e5		 mov	 esp, ebp
  00133	5d		 pop	 ebp
  00134	c2 0c 00	 ret	 12			; 0000000cH
$LN7@Connect:

; 69   : 	}
; 70   : 	this->m_SendBufLen=0;
; 71   : 	this->SetConnect(TRUE);

  00137	6a 01		 push	 1
  00139	8d 4e 04	 lea	 ecx, DWORD PTR [esi+4]
  0013c	c7 86 1c 80 0c
	00 00 00 00 00	 mov	 DWORD PTR [esi+819228], 0
  00146	e8 00 00 00 00	 call	 ?SetConnect@MyWinsockBase@@QAEXH@Z ; MyWinsockBase::SetConnect

; 72   : 
; 73   : 	return TRUE;
; 74   : }

  0014b	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0014e	b8 01 00 00 00	 mov	 eax, 1
  00153	5f		 pop	 edi
  00154	33 cd		 xor	 ecx, ebp
  00156	5e		 pop	 esi
  00157	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0015c	8b e5		 mov	 esp, ebp
  0015e	5d		 pop	 ebp
  0015f	c2 0c 00	 ret	 12			; 0000000cH
?Connect@wsJoinServerCli@@QAEHPADGK@Z ENDP		; wsJoinServerCli::Connect
_TEXT	ENDS
; Function compile flags: /Ogtp
; File c:\users\michel\desktop\source\gameserver\source\wsjoinservercli.cpp
;	COMDAT ?DataSend@wsJoinServerCli@@QAEHPADH@Z
_TEXT	SEGMENT
_buf$ = 8						; size = 4
_nDx$1$ = 12						; size = 4
_len$ = 12						; size = 4
?DataSend@wsJoinServerCli@@QAEHPADH@Z PROC		; wsJoinServerCli::DataSend, COMDAT
; _this$ = ecx

; 79   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	53		 push	 ebx
  00004	56		 push	 esi

; 80   : 	int nResult;
; 81   : 	int nLeft;
; 82   : 	int nDx;
; 83   : 	LPBYTE sendbuf;
; 84   : 	int* sendbuflen;
; 85   : 	
; 86   : 	if ( len <= 0 )

  00005	8b 75 0c	 mov	 esi, DWORD PTR _len$[ebp]
  00008	8b d9		 mov	 ebx, ecx
  0000a	85 f6		 test	 esi, esi
  0000c	7e 4a		 jle	 SHORT $LN29@DataSend

; 87   : 	{
; 88   : 		return 0;
; 89   : 	}
; 90   : 
; 91   : 	if ( this->m_socket  == INVALID_SOCKET )

  0000e	83 7b 0c ff	 cmp	 DWORD PTR [ebx+12], -1
  00012	74 44		 je	 SHORT $LN29@DataSend

; 92   : 	{
; 93   : 		return 0;
; 94   : 	}
; 95   : 
; 96   : 	nDx = 0;
; 97   : 
; 98   : 	sendbuf = this->m_SendBuf;
; 99   : 	sendbuflen= &len;
; 100  : 
; 101  : 	if ( this->m_SendBufLen   > 0 )

  00014	8b 93 1c 80 0c
	00		 mov	 edx, DWORD PTR [ebx+819228]
  0001a	33 c9		 xor	 ecx, ecx
  0001c	89 4d 0c	 mov	 DWORD PTR _nDx$1$[ebp], ecx
  0001f	85 d2		 test	 edx, edx
  00021	7e 3d		 jle	 SHORT $LN6@DataSend

; 102  : 	{
; 103  : 		if ( (this->m_SendBufLen +len) < 819200 )

  00023	8d 04 32	 lea	 eax, DWORD PTR [edx+esi]
  00026	3d 00 80 0c 00	 cmp	 eax, 819200		; 000c8000H
  0002b	7d 23		 jge	 SHORT $LN7@DataSend

; 104  : 		{
; 105  : 			memcpy( &this->m_SendBuf[this->m_SendBufLen]  , buf, len);	// Review this later

  0002d	56		 push	 esi
  0002e	ff 75 08	 push	 DWORD PTR _buf$[ebp]
  00031	8d 43 1c	 lea	 eax, DWORD PTR [ebx+28]
  00034	03 c2		 add	 eax, edx
  00036	50		 push	 eax
  00037	e8 00 00 00 00	 call	 _memcpy
  0003c	83 c4 0c	 add	 esp, 12			; 0000000cH

; 106  : 
; 107  : 			this->m_SendBufLen +=len;
; 108  : 			return 1;

  0003f	b8 01 00 00 00	 mov	 eax, 1
  00044	01 b3 1c 80 0c
	00		 add	 DWORD PTR [ebx+819228], esi
  0004a	5e		 pop	 esi
  0004b	5b		 pop	 ebx

; 166  : }

  0004c	5d		 pop	 ebp
  0004d	c2 08 00	 ret	 8
$LN7@DataSend:

; 109  : 		}
; 110  : 		this->Close();

  00050	8d 4b 04	 lea	 ecx, DWORD PTR [ebx+4]
  00053	e8 00 00 00 00	 call	 ?Close@MyWinsockBase@@QAEHXZ ; MyWinsockBase::Close
$LN29@DataSend:

; 111  : 		return FALSE;

  00058	5e		 pop	 esi
  00059	33 c0		 xor	 eax, eax
  0005b	5b		 pop	 ebx

; 166  : }

  0005c	5d		 pop	 ebp
  0005d	c2 08 00	 ret	 8
$LN6@DataSend:
  00060	57		 push	 edi

; 112  : 	}
; 113  : 
; 114  : 	nLeft= *sendbuflen;

  00061	8b fe		 mov	 edi, esi
$LL2@DataSend:

; 115  : 
; 116  : 	while ( true )
; 117  : 	{
; 118  : 		nResult=send(this->m_socket, (char*)&buf[nDx], (*sendbuflen - nDx), 0);

  00063	6a 00		 push	 0
  00065	8b c6		 mov	 eax, esi
  00067	2b c1		 sub	 eax, ecx
  00069	50		 push	 eax
  0006a	8b 45 08	 mov	 eax, DWORD PTR _buf$[ebp]
  0006d	03 c1		 add	 eax, ecx
  0006f	50		 push	 eax
  00070	ff 73 0c	 push	 DWORD PTR [ebx+12]
  00073	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__send@16

; 119  : 
; 120  : 		if ( nResult == -1)

  00079	83 f8 ff	 cmp	 eax, -1
  0007c	75 64		 jne	 SHORT $LN8@DataSend

; 121  : 		{
; 122  : 			if ( WSAGetLastError() != WSAEWOULDBLOCK )

  0007e	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__WSAGetLastError@0
  00084	3d 33 27 00 00	 cmp	 eax, 10035		; 00002733H
  00089	0f 85 91 00 00
	00		 jne	 $LN19@DataSend

; 128  : 			}
; 129  : 
; 130  : 			if ( (*sendbuflen + nLeft) > 819200 )

  0008f	8d 04 37	 lea	 eax, DWORD PTR [edi+esi]
  00092	3d 00 80 0c 00	 cmp	 eax, 819200		; 000c8000H
  00097	7f 6f		 jg	 SHORT $LN20@DataSend

; 136  : 			}
; 137  : 
; 138  : 			if ( nDx >= 0 )

  00099	8b 4d 0c	 mov	 ecx, DWORD PTR _nDx$1$[ebp]
  0009c	85 c9		 test	 ecx, ecx
  0009e	78 54		 js	 SHORT $LN14@DataSend

; 139  : 			{
; 140  : 				memcpy( &this->m_SendBuf[this->m_SendBufLen],  &buf[nDx], nLeft);

  000a0	8b 45 08	 mov	 eax, DWORD PTR _buf$[ebp]
  000a3	03 c1		 add	 eax, ecx
  000a5	57		 push	 edi
  000a6	50		 push	 eax
  000a7	8b 83 1c 80 0c
	00		 mov	 eax, DWORD PTR [ebx+819228]
  000ad	83 c0 1c	 add	 eax, 28			; 0000001cH
  000b0	03 c3		 add	 eax, ebx
  000b2	50		 push	 eax
  000b3	e8 00 00 00 00	 call	 _memcpy

; 141  : 				
; 142  : 				this->m_SendBufLen +=nLeft;
; 143  : 
; 144  : 				LogAdd("error-L3 : Copy1 : nLeft:%d len:%d nDx:%d", nLeft, this->m_SendBufLen , nDx);

  000b8	ff 75 0c	 push	 DWORD PTR _nDx$1$[ebp]
  000bb	01 bb 1c 80 0c
	00		 add	 DWORD PTR [ebx+819228], edi
  000c1	ff b3 1c 80 0c
	00		 push	 DWORD PTR [ebx+819228]
  000c7	57		 push	 edi
  000c8	68 00 00 00 00	 push	 OFFSET ??_C@_0CK@NAOKACP@error?9L3?5?3?5Copy1?5?3?5nLeft?3?$CFd?5len?3@
  000cd	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  000d3	83 c4 1c	 add	 esp, 28			; 0000001cH

; 161  : 		{
; 162  : 			break;
; 163  : 		}
; 164  : 	}
; 165  : 	return TRUE;

  000d6	b8 01 00 00 00	 mov	 eax, 1
  000db	5f		 pop	 edi
  000dc	5e		 pop	 esi
  000dd	5b		 pop	 ebx

; 166  : }

  000de	5d		 pop	 ebp
  000df	c2 08 00	 ret	 8
$LN8@DataSend:

; 145  : 				return TRUE;
; 146  : 			}
; 147  : 		}
; 148  : 		else if ( nResult == 0 )

  000e2	85 c0		 test	 eax, eax
  000e4	74 6a		 je	 SHORT $LN22@DataSend

; 155  : 		{
; 156  : 			nDx += nResult;

  000e6	8b 4d 0c	 mov	 ecx, DWORD PTR _nDx$1$[ebp]

; 151  : 			break;
; 152  : 		}
; 153  : 
; 154  : 		if ( nResult >0 )

  000e9	7e 09		 jle	 SHORT $LN14@DataSend

; 155  : 		{
; 156  : 			nDx += nResult;

  000eb	03 c8		 add	 ecx, eax

; 157  : 			nLeft -= nResult;

  000ed	2b f8		 sub	 edi, eax
  000ef	89 4d 0c	 mov	 DWORD PTR _nDx$1$[ebp], ecx

; 158  : 			*sendbuflen -= nResult;

  000f2	2b f0		 sub	 esi, eax
$LN14@DataSend:

; 159  : 		}
; 160  : 		if ( nLeft <= 0)

  000f4	85 ff		 test	 edi, edi
  000f6	0f 8f 67 ff ff
	ff		 jg	 $LL2@DataSend

; 161  : 		{
; 162  : 			break;
; 163  : 		}
; 164  : 	}
; 165  : 	return TRUE;

  000fc	5f		 pop	 edi
  000fd	5e		 pop	 esi
  000fe	b8 01 00 00 00	 mov	 eax, 1
  00103	5b		 pop	 ebx

; 166  : }

  00104	5d		 pop	 ebp
  00105	c2 08 00	 ret	 8
$LN20@DataSend:

; 131  : 			{
; 132  : 				LogAddC(2,"error-L3 : buffer error closed %d, %d", (*sendbuflen+nLeft), 819200);

  00108	68 00 80 0c 00	 push	 819200			; 000c8000H
  0010d	8d 04 37	 lea	 eax, DWORD PTR [edi+esi]
  00110	50		 push	 eax
  00111	68 00 00 00 00	 push	 OFFSET ??_C@_0CG@DMMIJENA@error?9L3?5?3?5buffer?5error?5closed?5?$CF@
  00116	6a 02		 push	 2
  00118	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAddC@@3P6AXEPADZZA ; LogAddC

; 133  : 				*sendbuflen = 0;
; 134  : 				this->Close(this->m_socket);
; 135  : 				return FALSE;

  0011e	eb 19		 jmp	 SHORT $LN28@DataSend
$LN19@DataSend:

; 123  : 			{
; 124  : 				LogAdd("error-L3 : %d (%s %d)", WSAGetLastError(), __FILE__, __LINE__);

  00120	6a 7c		 push	 124			; 0000007cH
  00122	68 00 00 00 00	 push	 OFFSET ??_C@_0BE@MELEPACJ@wsJoinServerCli?4cpp?$AA@
  00127	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__WSAGetLastError@0
  0012d	50		 push	 eax
  0012e	68 00 00 00 00	 push	 OFFSET ??_C@_0BG@DJOPGDCB@error?9L3?5?3?5?$CFd?5?$CI?$CFs?5?$CFd?$CJ?$AA@
  00133	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
$LN28@DataSend:
  00139	83 c4 10	 add	 esp, 16			; 00000010H

; 125  : 				*sendbuflen=0;
; 126  : 				this->Close(this->m_socket );

  0013c	8d 4b 04	 lea	 ecx, DWORD PTR [ebx+4]
  0013f	ff 73 0c	 push	 DWORD PTR [ebx+12]
  00142	e8 00 00 00 00	 call	 ?Close@MyWinsockBase@@QAEHI@Z ; MyWinsockBase::Close
  00147	5f		 pop	 edi
  00148	5e		 pop	 esi

; 127  : 				return FALSE;

  00149	33 c0		 xor	 eax, eax
  0014b	5b		 pop	 ebx

; 166  : }

  0014c	5d		 pop	 ebp
  0014d	c2 08 00	 ret	 8
$LN22@DataSend:

; 149  : 		{
; 150  : 			LogAdd("error-L3 : send()  result is zero", WSAGetLastError());

  00150	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__WSAGetLastError@0
  00156	50		 push	 eax
  00157	68 00 00 00 00	 push	 OFFSET ??_C@_0CC@HECGJOBH@error?9L3?5?3?5send?$CI?$CJ?5?5result?5is?5zer@
  0015c	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  00162	83 c4 08	 add	 esp, 8

; 161  : 		{
; 162  : 			break;
; 163  : 		}
; 164  : 	}
; 165  : 	return TRUE;

  00165	b8 01 00 00 00	 mov	 eax, 1
  0016a	5f		 pop	 edi
  0016b	5e		 pop	 esi
  0016c	5b		 pop	 ebx

; 166  : }

  0016d	5d		 pop	 ebp
  0016e	c2 08 00	 ret	 8
?DataSend@wsJoinServerCli@@QAEHPADH@Z ENDP		; wsJoinServerCli::DataSend
_TEXT	ENDS
; Function compile flags: /Ogtp
; File c:\users\michel\desktop\source\gameserver\source\wsjoinservercli.cpp
;	COMDAT ?DataRecv@wsJoinServerCli@@QAEHXZ
_TEXT	SEGMENT
_headcode$ = -4						; size = 1
?DataRecv@wsJoinServerCli@@QAEHXZ PROC			; wsJoinServerCli::DataRecv, COMDAT
; _this$ = ecx

; 225  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx
  00004	53		 push	 ebx
  00005	56		 push	 esi
  00006	57		 push	 edi
  00007	8b f9		 mov	 edi, ecx

; 226  : 	int nResult;
; 227  : 	unsigned char* recvbuf;
; 228  : 	int* recvbuflen;
; 229  : 	int lOfs;
; 230  : 	int size;
; 231  : 	BYTE headcode;
; 232  : 
; 233  : 	recvbuf= (UCHAR*)&this->m_RecvBuf[0]   ;
; 234  : 	recvbuflen=&this->m_RecvBufLen ;
; 235  : 	nResult=recv(this->m_socket , (CHAR*)&recvbuf[*recvbuflen], (819200-*recvbuflen), 0);

  00009	bb 00 80 0c 00	 mov	 ebx, 819200		; 000c8000H
  0000e	6a 00		 push	 0
  00010	8b c3		 mov	 eax, ebx
  00012	8b 97 20 00 19
	00		 mov	 edx, DWORD PTR [edi+1638432]
  00018	8d b7 20 80 0c
	00		 lea	 esi, DWORD PTR [edi+819232]
  0001e	2b c2		 sub	 eax, edx
  00020	50		 push	 eax
  00021	8d 04 32	 lea	 eax, DWORD PTR [edx+esi]
  00024	50		 push	 eax
  00025	ff 77 0c	 push	 DWORD PTR [edi+12]
  00028	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__recv@16

; 236  : 
; 237  : 	if ( nResult == 0 )

  0002e	85 c0		 test	 eax, eax
  00030	75 2e		 jne	 SHORT $LN4@DataRecv

; 238  : 	{
; 239  : 		LogAdd("error-L3 : closed %d - buff:%d(%d) ",

  00032	2b 9f 20 00 19
	00		 sub	 ebx, DWORD PTR [edi+1638432]
  00038	53		 push	 ebx
  00039	ff b7 20 00 19
	00		 push	 DWORD PTR [edi+1638432]
  0003f	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__WSAGetLastError@0
  00045	50		 push	 eax
  00046	68 00 00 00 00	 push	 OFFSET ??_C@_0CE@LOFMLGPB@error?9L3?5?3?5closed?5?$CFd?5?9?5buff?3?$CFd?$CI?$CF@
  0004b	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  00051	83 c4 10	 add	 esp, 16			; 00000010H
$LN27@DataRecv:

; 240  : 			WSAGetLastError(), this->m_RecvBufLen, 819200 - *recvbuflen);
; 241  : 
; 242  : 		return 1;

  00054	5f		 pop	 edi
  00055	5e		 pop	 esi
  00056	b8 01 00 00 00	 mov	 eax, 1
  0005b	5b		 pop	 ebx

; 333  : 	return 0;
; 334  : }

  0005c	8b e5		 mov	 esp, ebp
  0005e	5d		 pop	 ebp
  0005f	c3		 ret	 0
$LN4@DataRecv:

; 243  : 	}
; 244  : 	else if (nResult == -1 )

  00060	83 f8 ff	 cmp	 eax, -1
  00063	75 2c		 jne	 SHORT $LN6@DataRecv

; 245  : 	{
; 246  : 		if ( WSAGetLastError() == WSAEWOULDBLOCK )

  00065	8b 35 00 00 00
	00		 mov	 esi, DWORD PTR __imp__WSAGetLastError@0
  0006b	ff d6		 call	 esi
  0006d	3d 33 27 00 00	 cmp	 eax, 10035		; 00002733H
  00072	74 e0		 je	 SHORT $LN27@DataRecv

; 247  : 		{
; 248  : 			return 1;
; 249  : 		}
; 250  : 		LogAdd("error-L3 : recv error %d", WSAGetLastError() );

  00074	ff d6		 call	 esi
  00076	50		 push	 eax
  00077	68 00 00 00 00	 push	 OFFSET ??_C@_0BJ@MHCMJICL@error?9L3?5?3?5recv?5error?5?$CFd?$AA@
  0007c	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  00082	83 c4 08	 add	 esp, 8

; 251  : 		return 1;

  00085	b8 01 00 00 00	 mov	 eax, 1
  0008a	5f		 pop	 edi
  0008b	5e		 pop	 esi
  0008c	5b		 pop	 ebx

; 333  : 	return 0;
; 334  : }

  0008d	8b e5		 mov	 esp, ebp
  0008f	5d		 pop	 ebp
  00090	c3		 ret	 0
$LN6@DataRecv:

; 252  : 	}
; 253  : 
; 254  : 	*recvbuflen += nResult;

  00091	01 87 20 00 19
	00		 add	 DWORD PTR [edi+1638432], eax

; 255  : 
; 256  : 	if (*recvbuflen<3)

  00097	83 bf 20 00 19
	00 03		 cmp	 DWORD PTR [edi+1638432], 3
  0009e	7d 0c		 jge	 SHORT $LN8@DataRecv

; 257  : 	{
; 258  : 		return 3;

  000a0	5f		 pop	 edi
  000a1	5e		 pop	 esi
  000a2	b8 03 00 00 00	 mov	 eax, 3
  000a7	5b		 pop	 ebx

; 333  : 	return 0;
; 334  : }

  000a8	8b e5		 mov	 esp, ebp
  000aa	5d		 pop	 ebp
  000ab	c3		 ret	 0
$LN8@DataRecv:

; 259  : 	}
; 260  : 
; 261  : 	lOfs=0;

  000ac	33 db		 xor	 ebx, ebx
  000ae	66 90		 npad	 2
$LL2@DataRecv:

; 262  : 	size=0;
; 263  : 
; 264  : 	
; 265  : //	LogAddC(2, "[DEBUG] Type: %x", recvbuf[lOfs]);
; 266  : 
; 267  : 	while ( true )
; 268  : 	{
; 269  : 		
; 270  : 		if (recvbuf[lOfs] == 0xC1 )	// Type packet handling C1 Type

  000b0	8a 04 33	 mov	 al, BYTE PTR [ebx+esi]
  000b3	8d 0c 33	 lea	 ecx, DWORD PTR [ebx+esi]
  000b6	3c c1		 cmp	 al, 193			; 000000c1H
  000b8	75 09		 jne	 SHORT $LN9@DataRecv

; 271  : 		{
; 272  : 			unsigned char* c1subbase = (UCHAR*)&recvbuf[lOfs];
; 273  : 			size=c1subbase[1];

  000ba	0f b6 71 01	 movzx	 esi, BYTE PTR [ecx+1]

; 274  : 			headcode=c1subbase[2];

  000be	8a 41 02	 mov	 al, BYTE PTR [ecx+2]
  000c1	eb 18		 jmp	 SHORT $LN26@DataRecv
$LN9@DataRecv:

; 275  : 		}
; 276  : 		else if ( recvbuf[lOfs] == 0xC2 ) // Type packet handling C2 Type

  000c3	3c c2		 cmp	 al, 194			; 000000c2H
  000c5	0f 85 8c 00 00
	00		 jne	 $LN11@DataRecv

; 277  : 		{
; 278  : 			unsigned char* c2subbase=(UCHAR*)&recvbuf[lOfs];
; 279  : 			size = c2subbase[1] * 256;

  000cb	0f b6 71 01	 movzx	 esi, BYTE PTR [ecx+1]

; 280  : 			size |= c2subbase[2];

  000cf	0f b6 41 02	 movzx	 eax, BYTE PTR [ecx+2]
  000d3	c1 e6 08	 shl	 esi, 8
  000d6	0b f0		 or	 esi, eax

; 281  : 			headcode = c2subbase[3];

  000d8	8a 41 03	 mov	 al, BYTE PTR [ecx+3]
$LN26@DataRecv:
  000db	88 45 fc	 mov	 BYTE PTR _headcode$[ebp], al

; 298  : 		}
; 299  : 
; 300  : 		if ( size <= 0 )

  000de	85 f6		 test	 esi, esi
  000e0	7e 5d		 jle	 SHORT $LN22@DataRecv

; 303  : 			return 0;
; 304  : 		}
; 305  : 
; 306  : 		if ( size <= *recvbuflen )

  000e2	3b b7 20 00 19
	00		 cmp	 esi, DWORD PTR [edi+1638432]
  000e8	7f 29		 jg	 SHORT $LN14@DataRecv

; 307  : 		{
; 308  : 			this->wsProtocolCore(headcode, &recvbuf[lOfs], size);

  000ea	8b 87 24 00 19
	00		 mov	 eax, DWORD PTR [edi+1638436]
  000f0	56		 push	 esi
  000f1	51		 push	 ecx
  000f2	ff 75 fc	 push	 DWORD PTR _headcode$[ebp]
  000f5	ff d0		 call	 eax

; 309  : 			lOfs += size;
; 310  : 			*recvbuflen -= size;

  000f7	29 b7 20 00 19
	00		 sub	 DWORD PTR [edi+1638432], esi
  000fd	83 c4 0c	 add	 esp, 12			; 0000000cH
  00100	03 de		 add	 ebx, esi

; 311  : 
; 312  : 			if ( *recvbuflen <= 0)

  00102	83 bf 20 00 19
	00 00		 cmp	 DWORD PTR [edi+1638432], 0
  00109	7e 75		 jle	 SHORT $LN17@DataRecv

; 326  : 			break;
; 327  : 		}
; 328  : 		else
; 329  : 		{
; 330  : 			break;
; 331  : 		}
; 332  : 	}

  0010b	8d b7 20 80 0c
	00		 lea	 esi, DWORD PTR [edi+819232]
  00111	eb 9d		 jmp	 SHORT $LL2@DataRecv
$LN14@DataRecv:

; 313  : 			{
; 314  : 				break;
; 315  : 			}
; 316  : 		}
; 317  : 		
; 318  : 		else if ( lOfs > 0 )

  00113	85 db		 test	 ebx, ebx
  00115	7e 69		 jle	 SHORT $LN17@DataRecv

; 319  : 		{
; 320  : 			if ( *recvbuflen < 1 ) 

  00117	8b 87 20 00 19
	00		 mov	 eax, DWORD PTR [edi+1638432]
  0011d	83 f8 01	 cmp	 eax, 1
  00120	7c 5e		 jl	 SHORT $LN17@DataRecv

; 321  : 			{
; 322  : 				break;
; 323  : 			}
; 324  : 
; 325  : 			memcpy(recvbuf, &recvbuf[lOfs], *recvbuflen);

  00122	50		 push	 eax
  00123	8d 8f 20 80 0c
	00		 lea	 ecx, DWORD PTR [edi+819232]
  00129	8d 04 0b	 lea	 eax, DWORD PTR [ebx+ecx]
  0012c	50		 push	 eax
  0012d	51		 push	 ecx
  0012e	e8 00 00 00 00	 call	 _memcpy
  00133	83 c4 0c	 add	 esp, 12			; 0000000cH
  00136	33 c0		 xor	 eax, eax
  00138	5f		 pop	 edi
  00139	5e		 pop	 esi
  0013a	5b		 pop	 ebx

; 333  : 	return 0;
; 334  : }

  0013b	8b e5		 mov	 esp, ebp
  0013d	5d		 pop	 ebp
  0013e	c3		 ret	 0
$LN22@DataRecv:

; 301  : 		{
; 302  : 			LogAdd("error-L2 : size %d", size);

  0013f	56		 push	 esi
  00140	68 00 00 00 00	 push	 OFFSET ??_C@_0BD@JDAMFKGN@error?9L2?5?3?5size?5?$CFd?$AA@
  00145	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  0014b	83 c4 08	 add	 esp, 8
  0014e	33 c0		 xor	 eax, eax
  00150	5f		 pop	 edi
  00151	5e		 pop	 esi
  00152	5b		 pop	 ebx

; 333  : 	return 0;
; 334  : }

  00153	8b e5		 mov	 esp, ebp
  00155	5d		 pop	 ebp
  00156	c3		 ret	 0
$LN11@DataRecv:

; 282  : 		}
; 283  : 		else
; 284  : 		{
; 285  : 			LogAdd("error-L2 : header error (%s %d)lOfs:%d, size:%d", __FILE__, __LINE__, lOfs, *recvbuflen);

  00157	ff b7 20 00 19
	00		 push	 DWORD PTR [edi+1638432]
  0015d	53		 push	 ebx
  0015e	68 1d 01 00 00	 push	 285			; 0000011dH
  00163	68 00 00 00 00	 push	 OFFSET ??_C@_0BE@MELEPACJ@wsJoinServerCli?4cpp?$AA@
  00168	68 00 00 00 00	 push	 OFFSET ??_C@_0DA@NDEDNMBA@error?9L2?5?3?5header?5error?5?$CI?$CFs?5?$CFd?$CJl@
  0016d	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  00173	83 c4 14	 add	 esp, 20			; 00000014H

; 286  : /*			char DebugOut[6000] = { 0 };
; 287  : 
; 288  : 			for( int i = 0; i < 200; i++ )
; 289  : 			{
; 290  : 				char ByteFormat[100] = { 0 };
; 291  : 				sprintf(ByteFormat, "%X ", recvbuf[i]);
; 292  : 				strcat(DebugOut, ByteFormat);
; 293  : 			}
; 294  : 			
; 295  : 			LogAddC(2, DebugOut);*/
; 296  : 			*recvbuflen = 0;

  00176	c7 87 20 00 19
	00 00 00 00 00	 mov	 DWORD PTR [edi+1638432], 0
$LN17@DataRecv:

; 297  : 			return 0;

  00180	5f		 pop	 edi
  00181	5e		 pop	 esi
  00182	33 c0		 xor	 eax, eax
  00184	5b		 pop	 ebx

; 333  : 	return 0;
; 334  : }

  00185	8b e5		 mov	 esp, ebp
  00187	5d		 pop	 ebp
  00188	c3		 ret	 0
?DataRecv@wsJoinServerCli@@QAEHXZ ENDP			; wsJoinServerCli::DataRecv
_TEXT	ENDS
; Function compile flags: /Ogtp
; File c:\users\michel\desktop\source\gameserver\source\wsjoinservercli.cpp
;	COMDAT ?FDWRITE_MsgDataSend@wsJoinServerCli@@QAEHXZ
_TEXT	SEGMENT
?FDWRITE_MsgDataSend@wsJoinServerCli@@QAEHXZ PROC	; wsJoinServerCli::FDWRITE_MsgDataSend, COMDAT
; _this$ = ecx

; 172  : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx
  00003	57		 push	 edi

; 173  : 	int nResult;
; 174  : 	int nDx;	// Degeneration X :)
; 175  : 	LPBYTE sendbuf;
; 176  : 	int* sendbuflen;
; 177  : 
; 178  : 	nDx=0;

  00004	33 ff		 xor	 edi, edi

; 179  : 	sendbuf=&this->m_SendBuf[0];
; 180  : 	sendbuflen=&this->m_SendBufLen ;
; 181  : 
; 182  : 	if (this->m_SendBufLen < 1)

  00006	83 be 1c 80 0c
	00 01		 cmp	 DWORD PTR [esi+819228], 1
  0000d	7d 06		 jge	 SHORT $LN11@FDWRITE_Ms

; 183  : 	{
; 184  : 		return TRUE;

  0000f	8d 47 01	 lea	 eax, DWORD PTR [edi+1]
  00012	5f		 pop	 edi
  00013	5e		 pop	 esi

; 220  : }

  00014	c3		 ret	 0
$LN11@FDWRITE_Ms:
  00015	53		 push	 ebx

; 185  : 	}
; 186  : 
; 187  : 	while (*sendbuflen>0)

  00016	39 be 1c 80 0c
	00		 cmp	 DWORD PTR [esi+819228], edi
  0001c	0f 8e c9 00 00
	00		 jle	 $LN3@FDWRITE_Ms
$LL2@FDWRITE_Ms:

; 188  : 	{
; 189  : 		nResult=send(this->m_socket, (PCHAR)&sendbuf[nDx], *sendbuflen-nDx, 0);

  00022	8b 86 1c 80 0c
	00		 mov	 eax, DWORD PTR [esi+819228]
  00028	6a 00		 push	 0
  0002a	2b c7		 sub	 eax, edi
  0002c	50		 push	 eax
  0002d	8d 46 1c	 lea	 eax, DWORD PTR [esi+28]
  00030	03 c7		 add	 eax, edi
  00032	50		 push	 eax
  00033	ff 76 0c	 push	 DWORD PTR [esi+12]
  00036	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__send@16
  0003c	8b d8		 mov	 ebx, eax

; 190  : 		if (nResult == -1)

  0003e	83 fb ff	 cmp	 ebx, -1
  00041	74 63		 je	 SHORT $LN12@FDWRITE_Ms

; 201  : 				break;
; 202  : 			}
; 203  : 		}
; 204  : 		if (nResult <= 0)

  00043	85 db		 test	 ebx, ebx
  00045	7e 41		 jle	 SHORT $LN13@FDWRITE_Ms

; 207  : 			break;
; 208  : 		}
; 209  : 		LogAdd("error-L3 : nDx %d m_SendBufLen %d", nDx, this->m_SendBufLen );

  00047	ff b6 1c 80 0c
	00		 push	 DWORD PTR [esi+819228]
  0004d	57		 push	 edi
  0004e	68 00 00 00 00	 push	 OFFSET ??_C@_0CC@CMOPGBFG@error?9L3?5?3?5nDx?5?$CFd?5m_SendBufLen?5?$CF@
  00053	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd

; 210  : 
; 211  : 		if (nResult > 0)
; 212  : 		{
; 213  : 			nDx += nResult;
; 214  : 			*sendbuflen -= nResult;

  00059	29 9e 1c 80 0c
	00		 sub	 DWORD PTR [esi+819228], ebx
  0005f	03 fb		 add	 edi, ebx

; 215  : 		}
; 216  : 
; 217  : 		LogAdd("error-L3 : nDx %d m_SendBufLen %d", nDx, this->m_SendBufLen );

  00061	ff b6 1c 80 0c
	00		 push	 DWORD PTR [esi+819228]
  00067	57		 push	 edi
  00068	68 00 00 00 00	 push	 OFFSET ??_C@_0CC@CMOPGBFG@error?9L3?5?3?5nDx?5?$CFd?5m_SendBufLen?5?$CF@
  0006d	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  00073	83 c4 18	 add	 esp, 24			; 00000018H
  00076	83 be 1c 80 0c
	00 00		 cmp	 DWORD PTR [esi+819228], 0
  0007d	7f a3		 jg	 SHORT $LL2@FDWRITE_Ms

; 218  : 	}
; 219  : 	return TRUE;

  0007f	5b		 pop	 ebx
  00080	5f		 pop	 edi
  00081	b8 01 00 00 00	 mov	 eax, 1
  00086	5e		 pop	 esi

; 220  : }

  00087	c3		 ret	 0
$LN13@FDWRITE_Ms:

; 205  : 		{
; 206  : 			LogAdd("send() result is zero %d", WSAGetLastError());

  00088	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__WSAGetLastError@0
  0008e	50		 push	 eax
  0008f	68 00 00 00 00	 push	 OFFSET ??_C@_0BJ@BMEBGMFO@send?$CI?$CJ?5result?5is?5zero?5?$CFd?$AA@
  00094	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  0009a	83 c4 08	 add	 esp, 8

; 218  : 	}
; 219  : 	return TRUE;

  0009d	b8 01 00 00 00	 mov	 eax, 1
  000a2	5b		 pop	 ebx
  000a3	5f		 pop	 edi
  000a4	5e		 pop	 esi

; 220  : }

  000a5	c3		 ret	 0
$LN12@FDWRITE_Ms:

; 191  : 		{
; 192  : 			if ( WSAGetLastError() != WSAEWOULDBLOCK)

  000a6	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR __imp__WSAGetLastError@0
  000ac	ff d7		 call	 edi
  000ae	3d 33 27 00 00	 cmp	 eax, 10035		; 00002733H
  000b3	74 25		 je	 SHORT $LN6@FDWRITE_Ms

; 193  : 			{
; 194  : 				LogAdd("FD_WRITE send() ¿¡·¯ %d %d", WSAGetLastError(), *sendbuflen);

  000b5	ff b6 1c 80 0c
	00		 push	 DWORD PTR [esi+819228]
  000bb	ff d7		 call	 edi
  000bd	50		 push	 eax
  000be	68 00 00 00 00	 push	 OFFSET ??_C@_0BL@HNPHKEOO@FD_WRITE?5send?$CI?$CJ?5?$LP?$KB?$LH?$KP?5?$CFd?5?$CFd?$AA@
  000c3	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  000c9	83 c4 0c	 add	 esp, 12			; 0000000cH

; 195  : 				this->Close();

  000cc	8d 4e 04	 lea	 ecx, DWORD PTR [esi+4]
  000cf	e8 00 00 00 00	 call	 ?Close@MyWinsockBase@@QAEHXZ ; MyWinsockBase::Close
  000d4	5b		 pop	 ebx
  000d5	5f		 pop	 edi

; 196  : 				return FALSE;

  000d6	33 c0		 xor	 eax, eax
  000d8	5e		 pop	 esi

; 220  : }

  000d9	c3		 ret	 0
$LN6@FDWRITE_Ms:

; 197  : 			}
; 198  : 			else
; 199  : 			{
; 200  : 				LogAdd("FD_WRITE send() WSAEWOULDBLOCK : %d", WSAGetLastError());

  000da	ff d7		 call	 edi
  000dc	50		 push	 eax
  000dd	68 00 00 00 00	 push	 OFFSET ??_C@_0CE@HIKCACFP@FD_WRITE?5send?$CI?$CJ?5WSAEWOULDBLOCK?5?3@
  000e2	ff 15 00 00 00
	00		 call	 DWORD PTR ?LogAdd@@3P6AXPADZZA ; LogAdd
  000e8	83 c4 08	 add	 esp, 8
$LN3@FDWRITE_Ms:

; 218  : 	}
; 219  : 	return TRUE;

  000eb	5b		 pop	 ebx
  000ec	5f		 pop	 edi
  000ed	b8 01 00 00 00	 mov	 eax, 1
  000f2	5e		 pop	 esi

; 220  : }

  000f3	c3		 ret	 0
?FDWRITE_MsgDataSend@wsJoinServerCli@@QAEHXZ ENDP	; wsJoinServerCli::FDWRITE_MsgDataSend
_TEXT	ENDS
; Function compile flags: /Ogtp
; File c:\users\michel\desktop\source\gameserver\source\wsjoinservercli.cpp
;	COMDAT ?SetProtocolCore@wsJoinServerCli@@QAEHP6AXEPAEH@Z@Z
_TEXT	SEGMENT
_pc$ = 8						; size = 4
?SetProtocolCore@wsJoinServerCli@@QAEHP6AXEPAEH@Z@Z PROC ; wsJoinServerCli::SetProtocolCore, COMDAT
; _this$ = ecx

; 17   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 18   : 	this->wsProtocolCore = pc;

  00003	8b 45 08	 mov	 eax, DWORD PTR _pc$[ebp]
  00006	89 81 24 00 19
	00		 mov	 DWORD PTR [ecx+1638436], eax

; 19   : 	return TRUE;

  0000c	b8 01 00 00 00	 mov	 eax, 1

; 20   : }

  00011	5d		 pop	 ebp
  00012	c2 04 00	 ret	 4
?SetProtocolCore@wsJoinServerCli@@QAEHP6AXEPAEH@Z@Z ENDP ; wsJoinServerCli::SetProtocolCore
_TEXT	ENDS
; Function compile flags: /Ogtp
; File c:\users\michel\desktop\source\gameserver\source\wsjoinservercli.cpp
;	COMDAT ?__empty_global_delete@@YAXPAXI@Z
_TEXT	SEGMENT
___formal$ = 8						; size = 4
___formal$ = 12						; size = 4
?__empty_global_delete@@YAXPAXI@Z PROC			; __empty_global_delete, COMDAT

  00000	c3		 ret	 0
?__empty_global_delete@@YAXPAXI@Z ENDP			; __empty_global_delete
_TEXT	ENDS
; Function compile flags: /Ogtp
; File c:\users\michel\desktop\source\gameserver\source\wsjoinservercli.cpp
;	COMDAT ?__empty_global_delete@@YAXPAX@Z
_TEXT	SEGMENT
___formal$ = 8						; size = 4
?__empty_global_delete@@YAXPAX@Z PROC			; __empty_global_delete, COMDAT

  00000	c3		 ret	 0
?__empty_global_delete@@YAXPAX@Z ENDP			; __empty_global_delete
_TEXT	ENDS
END
